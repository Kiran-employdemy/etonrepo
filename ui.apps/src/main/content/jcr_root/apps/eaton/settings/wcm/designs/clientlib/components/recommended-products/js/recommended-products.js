/**
 *
 *
 *
 * - THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY -
 * - Generated by Gulp (gulp-babel).
 *
 *
 *
 *
 */


'use strict';

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

(function (App) {

  document.addEventListener('DOMContentLoaded', function () {
    [].concat(_toConsumableArray(document.querySelectorAll('.product-card-container'))).forEach(function (container) {
      var count = 0;
      var images = container.querySelectorAll('.product-card img');

      setCardHeight(container);
      window.addEventListener('resize', App.global.utils.throttled(1000, function () {
        return setCardHeight(container);
      }));
      var panel = container.closest('.panel-collapse');
      if (panel) {
        App.global.utils.watchForClass(panel, 'in').then(function () {
          return setCardHeight(container);
        });
      }

      [].concat(_toConsumableArray(images)).forEach(function (img) {
        return img.addEventListener('load', function () {
          count++;

          if (count >= images.length) {
            setCardHeight(container);
          }
        });
      });
    });
  });

  function setCardHeight(container) {
    if (window.innerWidth >= 992) {
      var maxHeight = 0;

      // Reset the height to be whatever the inner card content makes it.
      [].concat(_toConsumableArray(container.querySelectorAll('.product-card'))).forEach(function (card) {
        return card.style.height = '';
      });

      // With the height reset, find the tallest card.
      [].concat(_toConsumableArray(container.querySelectorAll('.product-card'))).forEach(function (card) {
        if (card.clientHeight > maxHeight) {
          maxHeight = card.clientHeight;
        }
      });

      // If a max height was found, set all of the cards to be that max height.
      if (maxHeight > 0) {
        [].concat(_toConsumableArray(container.querySelectorAll('.product-card'))).forEach(function (card) {
          return card.style.height = maxHeight + 'px';
        });
      }
    }
  }
})(window.App);