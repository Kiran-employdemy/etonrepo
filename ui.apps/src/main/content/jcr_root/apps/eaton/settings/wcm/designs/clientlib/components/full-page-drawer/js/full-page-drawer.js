/**
 *
 *
 *
 * - THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY -
 * - Generated by Gulp (gulp-babel).
 *
 *
 *
 *
 */


'use strict';

/* eslint-disable no-undef */
/* eslint-disable no-global-assign */
// noinspection JSConstantReassignment

if (typeof require !== 'undefined') {
  var constants = require('../../../global/js/etn-new-global-constants');
  suffixes = constants.suffixes;
  pathsTo = constants.pathsTo;
  cookies = constants.cookies;
  dates = constants.dates;
  elementAttributes = constants.elementAttributes;
  urls = constants.urls;
}
var setCookieAndRedirectToHrefFromLink = function setCookieAndRedirectToHrefFromLink(event) {
  if (document.body.className.indexOf('home-page') === -1 && document.body.className.indexOf('login-page') === -1) {
    document.cookie = cookies.deepLinkRedirect.cookie(window.location.pathname);
  }
  window.location = event.currentTarget.getAttribute('href');
  event.preventDefault();
};

function extractCountryLanaguage(pathname) {
  return pathname.replace(pathsTo.EATON_ROOT, '').replace(pathsTo.LOGIN_ROOT, '').replace(pathsTo.LOGIN_PATH, '').replace(suffixes.HTML, '');
}

var bindCookieAndRedirectToHrefFromLinkToSignInLink = function bindCookieAndRedirectToHrefFromLinkToSignInLink() {
  var signInLink = document.getElementsByClassName('open-sign-in');
  if (signInLink.length === 1) {
    var link = signInLink[0];
    link.onclick = function (event) {
      var href = new URL(event.currentTarget.getAttribute('href'));
      document.cookie = cookies.eatonRedirect.cookie(extractCountryLanaguage(href.pathname));
      setCookieAndRedirectToHrefFromLink(event);
    };
  }

  var signFreeBtn = document.getElementsByClassName('free-btn');
  if (signFreeBtn === null) {
    return false;
  } else {
    if (signFreeBtn.length === 1) {
      var freeLink = signFreeBtn[0];
      freeLink.onclick = function (event) {
        setCookieAndRedirectToHrefFromLink(event);
      };
    }
  }
};

var bindCookieAndRedirectToHrefFromLinkToCountrySelectionLink = function bindCookieAndRedirectToHrefFromLinkToCountrySelectionLink() {
  var countrySelectionLink = document.getElementsByClassName('open-country-selector');
  if (countrySelectionLink.length === 1) {
    var link = countrySelectionLink[0];
    link.onclick = function (event) {
      setCookieAndRedirectToHrefFromLink(event);
    };
  }
};

var ifLoginPageSetEtnRedirectCookieToCountryOfLoginPage = function ifLoginPageSetEtnRedirectCookieToCountryOfLoginPage() {
  if (document.body.className.indexOf('login-page') !== -1) {
    document.cookie = cookies.eatonRedirect.cookie(extractCountryLanaguage(window.location.pathname));
  }
};

document.addEventListener('DOMContentLoaded', function () {
  bindCookieAndRedirectToHrefFromLinkToSignInLink();
  bindCookieAndRedirectToHrefFromLinkToCountrySelectionLink();
  ifLoginPageSetEtnRedirectCookieToCountryOfLoginPage();
});