/**
 *
 *
 *
 * - THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY -
 * - Generated by Gulp (gulp-babel).
 *
 *
 *
 *
 */


//-----------------------------------
// Component : App.CookieAcceptance
//-----------------------------------
'use strict';

var App = window.App || {};

App.cookieAcceptance = function () {

  // Variable Declarations
  var componentClass = '#onetrust-banner-sdk';
  var $componentElement = $(componentClass);
  var $bodyEl = $('body');
  var cssOpenClass = 'cookie-acceptance-open';

  // Set up Eloqua reference to let it know if user opts in
  var _elqQ = _elqQ || [];

  /**
  * Init
  */
  var init = function init() {
    // If not in AEM Author Mode & component exists on page - initialize scripts
    addEventListeners();
  };

  var readStatus = function readStatus() {
    if ($.cookie('eatoncookies') === undefined) {
      $componentElement.show();
      $bodyEl.addClass(cssOpenClass);
    } else {
      $componentElement.remove();
      $bodyEl.removeClass(cssOpenClass);
    }
  };

  /**
  * @property {function} publishCookieSet - fire event to signal a cookie choice has been made
  */
  var publishCookieSet = function publishCookieSet() {
    $componentElement.remove();
    $bodyEl.removeClass(cssOpenClass);
    $(document).trigger(App.global.constants.EVENTS.HEADER.COOKIE_SET);
  };

  /**
   * Bind All Event Listeners
   */
  var addEventListeners = function addEventListeners() {

    readStatus();
    var acceptcookie = $('#onetrust-accept-btn-handler');
    var allowbtn = $('#accept-recommended-btn-handler');
    var confirmcookie = $('.save-preference-btn-handler');
    $(acceptcookie, allowbtn, confirmcookie).on('click', function (e) {
      e.preventDefault();
      $.cookie('eatoncookies', 'true');
      _elqQ.push(['elqOptIn']);
      publishCookieSet();
    });
  };

  /**
  * If containing DOM element is found, Initialize and Expose public methods
  */
  if ($componentElement.length > 0) {
    init();
  }
}();