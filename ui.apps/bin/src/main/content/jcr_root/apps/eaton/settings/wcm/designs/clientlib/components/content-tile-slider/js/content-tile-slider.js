/**
 *
 *
 *
 * - THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY -
 * - Generated by Gulp (gulp-babel).
 *
 *
 *
 *
 */


//-----------------------------------
// List Component - Content Tile SLider
//-----------------------------------
'use strict';

var App = window.App || {};
App.relatedProducts = function () {

  var $carousel = $('.module-related-content__slides');

  var init = function init() {
    initCarousel();
    charLimit();
  };

  var charLimit = function charLimit() {
    for (var i = 0; i < $('.related-family').length; i++) {
      var desc = $('#related-family-' + i).text().trim();
      if (desc.startsWith('<p>')) {
        desc = $(desc).text();
      }
      $('#related-family-' + i).html(desc);
    }
  };

  /**
   * Initialize Slick Carousel
   */
  var initCarousel = function initCarousel() {
    for (var i = 0; i < $carousel.length; i++) {

      $carousel.eq(i).addClass('module-related-content__slides--' + i);

      $carousel.eq(i).slick({
        slidesToShow: 3,
        slidesToScroll: 3,
        dots: true,
        dotsClass: 'eaton-slider__dots',
        prevArrow: $('.module-related-products__prev-arrow'),
        nextArrow: $('.module-related-products__next-arrow'),
        responsive: [{
          breakpoint: 991,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 3
          }
        }, {
          breakpoint: 768,
          settings: {
            slidesToShow: 1,
            slidesToScroll: 1
          }
        }]
      });
    }

    var sliderTiles = document.querySelectorAll('.module-related-products__info-text');
    var heightArray = [];
    // eslint-disable-next-line no-eq-null, eqeqeq
    if (sliderTiles.length != 0) {
      sliderTiles.forEach(function (element) {
        heightArray.push(element.offsetHeight);
      });

      var maxHeight = Math.max.apply(Math, heightArray);

      sliderTiles.forEach(function (element) {
        element.style.height = maxHeight + 'px';
      });
    }
  };

  /**
  * If containing DOM element is found, Initialize and Expose public methods
  */
  if ($carousel.length > 0) {
    init();
  }
}();